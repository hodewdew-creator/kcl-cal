<!DOCTYPE html>
<html lang="ko">
<head>
      <!-- êµ¬ê¸€ê´‘ê³  ë„£ê¸°ìœ„í•´ ì‚¬ì´íŠ¸ ì†Œìœ ì£¼ í™•ì¸) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8602787823938536"
     crossorigin="anonymous"></script>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>KCl ë³´ì • ê³„ì‚°ê¸° (Cats)</title>
  <meta name="description" content="KCl ì´ ì²¨ê°€ëŸ‰ ë° ìµœëŒ€ ì£¼ì…ì†ë„ ê³„ì‚° (ì œì œ 2 mEq/mL)">
  <style>
    :root{ --blue:#003399; --muted:#64748b; --bg:#f8fafc; --card:#fff; --border:#e5e7eb }
    *{box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f8fafc;color:#0f172a;padding:12px}
    h2{margin:0 0 12px;font-size:1.32rem;color:#003399;text-align:center}
    h3{margin:0 0 8px;font-size:1.06rem;color:#003399;display:flex;align-items:center;gap:10px}
    .card{background:#fff;border:1px solid var(--blue);border-radius:12px;padding:12px;margin-bottom:12px;box-shadow:0 2px 6px rgba(0,0,0,.04)}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .ibox{border:1px solid var(--border);border-radius:10px;padding:10px;background:#f9fafb;min-width:160px;flex:1}
    .ibox label{display:block;font-size:.92rem;margin-bottom:4px;color:#374151}
    .ibox input[type=number]{width:100%;padding:10px;font-size:1rem;border:1px solid var(--border);border-radius:8px;background:#fff}
    .ibox input:focus{outline:none;border-color:var(--blue)}
    .big{font-weight:700;color:#111827}
    .hint{font-size:.8rem;color:#64748b}
    .note{font-size:.82rem;color:#6b7280;margin-top:6px}
    .pillbar{display:flex;gap:8px;flex-wrap:wrap}
    .pill{padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer}
    .pill.active{background:#003399;color:#fff;border-color:#003399}
    .badge{display:inline-block;border:1px solid var(--border);background:#eef2ff;color:#003399;border-radius:999px;padding:2px 8px;font-size:.78rem;margin-left:8px}
    table{border-collapse:collapse;width:100%;font-size:.85rem}
    th,td{border:1px solid var(--border);padding:6px;text-align:center}
    th{background:#f3f4f6;color:#374151}
    .warn{color:#b91c1c;font-weight:600}
    .optrow{display:flex;gap:16px;align-items:center;flex-wrap:wrap}
  </style>
</head>
<body>
  <h2>âš¡ KCl ë³´ì • ê³„ì‚°ê¸°</h2>

  <!-- 1) ê¸°ë³¸ì…ë ¥: ì²´ì¤‘/ìˆ˜ì•¡ì´ëŸ‰ë§Œ -->
  <div class="card">
    <h3>ê¸°ë³¸ì…ë ¥</h3>
    <div class="row">
      <div class="ibox" style="max-width:220px">
        <label for="bw">ì²´ì¤‘ (kg)</label>
        <input id="bw" type="number" step="0.1" placeholder="ì„ íƒì…ë ¥" required>
        <div class="hint">ì…ë ¥ì‹œ ìµœëŒ€íˆ¬ì—¬ìœ¨(0.5 mEq/kg/h)ê¸°ì¤€ ìˆ˜ì•¡ìƒí•œì†ë„ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
      </div>
      <div class="ibox" style="max-width:220px">
        <label for="kvol">ìˆ˜ì•¡ ì´ëŸ‰ (mL, í•„ìˆ˜)</label>
        <input id="kvol" type="number" step="50" value="500" required>
      </div>
    </div>
  </div>

  <!-- 2) KCl ìš©ëŸ‰ ê¸°ì¤€ ì„ íƒ: ë‘˜ ì¤‘ í•˜ë‚˜ -->
  <div class="card">
    <h3>ğŸ§ª KCl ìš©ëŸ‰ ê¸°ì¤€ ì„ íƒ <span class="hint">(ë‘˜ì¤‘ ì„ íƒí•´ì£¼ì„¸ìš”.)</span></h3>
    <div class="optrow" style="margin:6px 0 10px">
      <label style="display:flex;align-items:center;gap:6px"><input type="radio" name="basis" id="basisSerum" checked> í˜ˆì¤‘ K ìˆ˜ì¹˜ ì…ë ¥</label>
      <label style="display:flex;align-items:center;gap:6px"><input type="radio" name="basis" id="basisPreset"> ëª©í‘œ mEq ì„ íƒ</label>
    </div>

    <div id="serumBox" class="row">
      <div class="ibox" style="max-width:260px">
        <label for="serumK">í˜ˆì²­ K (mmol/L)</label>
        <input id="serumK" type="number" step="0.1" placeholder="ì˜ˆ: 3.1">
        <div class="hint">ì…ë ¥ ì‹œ ê¶Œì¥ ì²¨ê°€ëŸ‰ì„ ìë™ ë°˜ì˜</div>
        <div id="serumNote" class="note"></div>
      </div>
    </div>

    <div id="presetBox" class="row" style="display:none">
      <div class="ibox" style="min-width:260px">
        <label>í”„ë¦¬ì…‹ (mEq/1L)</label>
        <div class="pillbar" id="presetBar">
          <div class="pill" data-t="20">20</div>
          <div class="pill" data-t="28">28</div>
          <div class="pill" data-t="40">40</div>
          <div class="pill" data-t="60">60</div>
          <div class="pill" data-t="80">80</div>
          <div class="pill" data-t="100">100</div>
        </div>
        <div class="hint">ë²„íŠ¼ íƒ­ìœ¼ë¡œ ëª©í‘œ ì²¨ê°€ëŸ‰ì„ ì„¤ì •</div>
      </div>
    </div>
  </div>

  <!-- 3) ê²°ê³¼: ê°„ê²° í‘œì‹œ -->
  <div class="card">
    <h3>ğŸ“Š ê³„ì‚° ê²°ê³¼ <span id="targetBadge" class="badge">ëª©í‘œ: 40 mEq/L</span></h3>
    <div class="row">
      <div class="ibox">
        <label>ì´ KCl ì²¨ê°€ëŸ‰ (mL)</label>
        <div id="kTotalMl" class="big">-</div>
      </div>
      <div class="ibox">
        <label>ìµœëŒ€ ìˆ˜ì•¡ì†ë„ (mL/h)</label>
        <div id="kMaxMl" class="big">-</div>
        <div class="hint">í˜„ì¬ ëª©í‘œë†ë„ ê¸°ì¤€ì—ì„œ 0.5 mEq/kg/hë¥¼ í™˜ì‚°í•œ ë¼ì¸ì†ë„</div>
      </div>
    </div>
  </div>

  <!-- 4) ê¶Œì¥ëŸ‰ í‘œ -->
  <div class="card">
    <h3>ğŸ“‹ í˜ˆì¤‘ K ê¸°ë°˜ ê¶Œì¥ KCl ì²¨ê°€ëŸ‰</h3>
    <table>
      <thead>
        <tr><th>í˜ˆì¤‘ K (mmol/L)</th><th>ëª©í‘œì²¨ê°€ëŸ‰ (1L)</th><th> 500mL ìˆ˜ì•¡ê¸°ì¤€ KCl</th></tr>
      </thead>
      <tbody>
        <tr><td>&lt; 2.0</td><td>&gt; 80 mEq</td><td>&gt; 20 mL</td></tr>
        <tr><td>2.0 ~ 2.5</td><td>60 mEq</td><td>15 mL</td></tr>
        <tr><td>2.5 ~ 3.0</td><td>40 mEq</td><td>10 mL</td></tr>
        <tr><td>3.0 ~ 3.5</td><td>28 mEq</td><td>7 mL</td></tr>
        <tr><td>3.5 ~ 5.5</td><td>20 mEq</td><td>5 mL</td></tr>
        <tr><td>&gt; 5.5</td><td class="warn">íˆ¬ì—¬ ê¸ˆì§€</td><td>-</td></tr>
      </tbody>
    </table>
    <div class="note muted" style="margin-top:8px">1mmol = 1mEq, ì œì œ 2 mEq/mL ê¸°ì¤€. ë³‘ì› í”„ë¡œí† ì½œ ìš°ì„ .</div>
  </div>

      <div class="note">
      * ì €ì¸ì‚°í˜ˆì¦(hypophosphataemia)ì´ ë™ë°˜ëœ ê³ ì–‘ì´ì˜ ê²½ìš°, í•„ìš”í•œ ì¹¼ë¥¨ ë³´ì¶©ëŸ‰ì˜ 25~50%ëŠ” ì¸ì‚°ì¹¼ë¥¨(potassium phosphate)ìœ¼ë¡œ, ë‚˜ë¨¸ì§€ 50~75%ëŠ” ì—¼í™”ì¹¼ë¥¨(potassium chloride)ìœ¼ë¡œ ê³µê¸‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
      * í™˜ìê°€ ì¹¼ë¥¨ ë³´ì¶©ì— ì˜ ë°˜ì‘í•˜ì§€ ì•Šì„ ê²½ìš°, ì €ë§ˆê·¸ë„¤ìŠ˜í˜ˆì¦(hypomagnesaemia) ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë¯€ë¡œ í™•ì¸ì´ ê¶Œì¥ë©ë‹ˆë‹¤.
    </div>
  
<script>
  const $ = (id)=>document.getElementById(id);
  const fmt = (x,d=0)=> (isNaN(x)? '-' : Number(x).toFixed(d));

  // Elements
  const bw=$('bw'), kvol=$('kvol');
  const basisSerum=$('basisSerum'), basisPreset=$('basisPreset');
  const serumBox=$('serumBox'), presetBox=$('presetBox');
  const serumK=$('serumK'), serumNote=$('serumNote');
  const presetBar=$('presetBar');
  const targetBadge=$('targetBadge');
  const kTotalMl=$('kTotalMl'), kMaxMl=$('kMaxMl');

  // State
  let target=40; // mEq/L
  const C = 2;   // mEq/mL (KCl ì›ì•¡ ë†ë„)

  // Mapping from í˜ˆì²­K â†’ ê¶Œì¥ target
  function targetFromSerumK(K){
    if(isNaN(K)) return {t:null, note:''};
    if(K > 5.5) return {t:null, note:'âš ï¸ ê³ ì¹¼ë¥¨í˜ˆì¦: KCl íˆ¬ì—¬ ê¸ˆì§€'};
    if(K < 2.0) return {t:80, note:'ë§¤ìš° ë‚®ìŒ â†’ â‰¥80 mEq/L ê¶Œì¥ (ì„ìƒ ìƒí™© ê³ ë ¤)'};
    if(K >= 2.0 && K < 2.5) return {t:60, note:'ë‚®ìŒ â†’ 60 mEq/L ê¶Œì¥'};
    if(K >= 2.5 && K < 3.0) return {t:40, note:'ê²½ë„ ì €ì¹¼ë¥¨í˜ˆì¦ â†’ 40 mEq/L ê¶Œì¥'};
    if(K >= 3.0 && K < 3.5) return {t:28, note:'í•˜í•œ ì •ìƒ ê·¼ì ‘ â†’ 28 mEq/L ê¶Œì¥'};
    return {t:20, note:'ì •ìƒ/ìœ ì§€ ë³´ì¶© â†’ 20 mEq/L ê¶Œì¥'}; // 3.5~5.5
  }

  function setTarget(t){
    target = t;
    targetBadge.textContent = `ëª©í‘œ: ${t} mEq/L`;
    // preset í•˜ì´ë¼ì´íŠ¸
    if(presetBar){
      presetBar.querySelectorAll('.pill').forEach(p=>{
        p.classList.toggle('active', Number(p.dataset.t) === Number(t));
      });
    }
    recalc();
  }

  function recalc(){
    const BW = parseFloat(bw.value);
    const V  = parseFloat(kvol.value);

    // 1) ì´ KCl ì²¨ê°€ëŸ‰ (mL) â€” ì›ì•¡ 2 mEq/mL ê¸°ì¤€
    const totalMeq = (isNaN(V)||isNaN(target)) ? NaN : target * (V/1000);
    const needMl   = (isNaN(totalMeq)) ? NaN : totalMeq / C;
    kTotalMl.textContent = isNaN(needMl) ? '-' : fmt(needMl,1);

    // 2) ìµœëŒ€ ìˆ˜ì•¡(ë¼ì¸) ì†ë„ (mL/h)
    //    0.5 mEq/kg/h í•œë„ë¥¼ í˜„ì¬ ë°±ì˜ KCl ë†ë„(target mEq/L)ë¡œ í™˜ì‚°
    const maxMeqHr = (isNaN(BW) || BW<=0) ? NaN : 0.5 * BW;         // mEq/h
    const maxLineMlHr = (isNaN(maxMeqHr) || isNaN(target) || target<=0)
      ? NaN
      : (maxMeqHr * 1000) / target;                                 // mL/h
    kMaxMl.textContent = isNaN(maxLineMlHr) ? '-' : fmt(maxLineMlHr,1);
  }

  // Basis toggle
  function updateBasis(){
    const serumMode = basisSerum.checked;
    serumBox.style.display = serumMode ? 'flex' : 'none';
    presetBox.style.display = serumMode ? 'none' : 'flex';
    if(serumMode){
      // serum ê¸°ë°˜: ì…ë ¥ì‹œ ìë™ setTarget
      applySerumK();
    }
  }

  function applySerumK(){
    const K = parseFloat(serumK.value);
    const {t, note} = targetFromSerumK(K);
    serumNote.textContent = note || '';
    if(t){ setTarget(t); } else { recalc(); }
  }

  // Preset click
  if(presetBar){
    presetBar.addEventListener('click', (e)=>{
      const btn = e.target.closest('.pill');
      if(!btn) return;
      const t = Number(btn.dataset.t);
      setTarget(t);
      serumNote.textContent = `í”„ë¦¬ì…‹ ì„ íƒ: ${t} mEq/L`;
    });
  }

  // Listeners
  ['input','change'].forEach(evt=>{
    [bw,kvol].forEach(el=> el.addEventListener(evt, recalc));
    if(serumK) serumK.addEventListener(evt, applySerumK);
    basisSerum.addEventListener(evt, updateBasis);
    basisPreset.addEventListener(evt, updateBasis);
  });

  // ì´ˆê¸° ìƒíƒœ
  setTarget(40);
  updateBasis();
  recalc();
</script>
</body>
</html>
